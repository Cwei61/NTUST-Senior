<%= raw(Kamiflex.hash(self) do
  carousel do
    @clubs.each do |club|
    bubble action: message_action("#{club.name}資訊") do 
      header margin: "none", backgroundColor: @category.color do
        vertical_box do
          text club.name,gravity: "center",size: "xl",align: "center",color: "#FFFFFF"
        end
      end
      body margin: "none" do
        vertical_box do
          horizontal_box do
            text "社長姓名", size: "lg", color: "#555555", flex: 0
            text club.leader, size: "lg", color: "#111111", align: "end"
          end
          horizontal_box do
            text "指導老師", size: "lg", color: "#555555", flex: 0
            text club.teacher, size: "lg", color: "#111111", align: "end"
          end
        end
        separator color: "#c2c2c2"
        vertical_box margin: "md" do
          text club.intro, wrap: true, size: "sm", maxLines: 10
        end
      end
      footer do
        separator color: "#c2c2c2"
        vertical_box margin: "md" do
          filler
        end
        url_button "Website", club.url, style: "primary", color: @category.color
      end
      end
    end
    bubble do
      header margin: "none", backgroundColor: @category.color do
        vertical_box do
          text "功能頁",gravity: "center",size: "xl",align: "center",color: "#FFFFFF"
        end
      end
      body margin: "none" do
        unless @clubs.first_page?
          message_button "第一頁", "#{@category.name}社團/1", style: "secondary", margin: "md"
          message_button "上一頁", "#{@category.name}社團/#{@clubs.prev_page}", style: "secondary", margin: "md"
        end
        unless @clubs.blank? || @clubs.last_page?
        message_button "下一頁", "#{@category.name}社團/#{@clubs.next_page}", style: "secondary", margin: "md"
        message_button "最後一頁", "#{@category.name}社團/#{@clubs.total_pages}", style: "secondary", margin: "md"
        end
        message_button "換個口味", "社團", style: "secondary", margin: "md"
      end
      footer do
       text "目前在 #{@current_page}/#{@clubs.total_pages} 頁", align: "center"
      end
    end
  end
end.to_json)%>
